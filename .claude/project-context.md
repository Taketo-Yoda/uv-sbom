# uv-sbom ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Claude Codeã‚„ä»–ã®é–‹ç™ºè€…ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Œå…¨ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**uv-sbom** ã¯ã€Pythonã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼[uv](https://github.com/astral-sh/uv)ã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€SBOM (Software Bill of Materials) ã‚’ç”Ÿæˆã™ã‚‹Rustè£½ã®CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### ä¸»è¦ãªç›®çš„
- uvãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’å¯è¦–åŒ–
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã‚„ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®ãŸã‚ã®SBOMç”Ÿæˆ
- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã®è‡ªå‹•åé›†ã¨å ±å‘Š

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
- ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 0.1.0
- Rust Edition: 2021
- CycloneDXä»•æ§˜: 1.6

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ä¸»è¦ãªä¾å­˜é–¢ä¿‚
```toml
clap = "4.5"                 # CLIå¼•æ•°ãƒ‘ãƒ¼ã‚¹ (deriveæ©Ÿèƒ½ä½¿ç”¨)
serde = "1.0"                # ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ (deriveæ©Ÿèƒ½ä½¿ç”¨)
serde_json = "1.0"           # JSONå‡¦ç†
toml = "0.8"                 # TOML (uv.lock) ãƒ‘ãƒ¼ã‚¹
anyhow = "1.0"               # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
reqwest = "0.12"             # HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (blockingæ©Ÿèƒ½ä½¿ç”¨)
chrono = "0.4"               # æ—¥æ™‚å‡¦ç†
uuid = "1.10"                # UUIDç”Ÿæˆ (v4æ©Ÿèƒ½ä½¿ç”¨)
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã¨è²¬å‹™

```
src/
â”œâ”€â”€ main.rs          # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€å…¨ä½“ã®ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”œâ”€â”€ cli.rs           # CLIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾© (clapä½¿ç”¨)
â”œâ”€â”€ lockfile.rs      # uv.lockãƒ•ã‚¡ã‚¤ãƒ« (TOML) ã®ãƒ‘ãƒ¼ã‚¹
â”œâ”€â”€ license.rs       # PyPI APIã‹ã‚‰ã®ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾— (ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ã)
â”œâ”€â”€ cyclonedx.rs     # CycloneDX 1.6 JSONå½¢å¼ã®ç”Ÿæˆ
â”œâ”€â”€ markdown.rs      # Markdownè¡¨å½¢å¼ã®ç”Ÿæˆ
â””â”€â”€ error.rs         # ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å‹å®šç¾© (è©³ç´°ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»˜ã)
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[CLIå¼•æ•°ãƒ‘ãƒ¼ã‚¹] --> B[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¤œè¨¼]
    B --> C[uv.lockèª­ã¿è¾¼ã¿]
    C --> D[uv.lockãƒ‘ãƒ¼ã‚¹]
    D --> E[PyPI APIã‹ã‚‰ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—]
    E --> F{å‡ºåŠ›å½¢å¼}
    F -->|JSON| G[CycloneDX JSONç”Ÿæˆ]
    F -->|Markdown| H[Markdownè¡¨ç”Ÿæˆ]
    G --> I[å‡ºåŠ›]
    H --> I
    I -->|--outputæŒ‡å®š| J[ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›]
    I -->|ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ| K[æ¨™æº–å‡ºåŠ›]
```

### ä¸»è¦ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### Package (lockfile.rs)
```rust
pub struct Package {
    pub name: String,           // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
    pub version: String,        // æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ (uv.lockã‹ã‚‰)
    pub description: Option<String>,  // PyPI APIã‹ã‚‰å–å¾—
    pub license: Option<String>,      // PyPI APIã‹ã‚‰å–å¾—
}
```

#### CLI Args (cli.rs)
```rust
pub struct Args {
    pub format: OutputFormat,   // json | markdown (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: json)
    pub path: Option<String>,   // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ".")
    pub output: Option<String>, // å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: æ¨™æº–å‡ºåŠ›)
}
```

#### SbomError (error.rs)
```rust
pub enum SbomError {
    LockfileNotFound { path, suggestion },
    LockfileParseError { path, details },
    LicenseFetchError { package_name, details },
    OutputGenerationError { format, details },
    FileWriteError { path, details },
    InvalidProjectPath { path, reason },
}
```

## é‡è¦ãªè¨­è¨ˆæ±ºå®šã¨ãã®ç†ç”±

### 1. ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹: uv.lock
**æ±ºå®š**: uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±ã‚’å–å¾—

**ç†ç”±**:
- âœ… æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± (ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«)
- âœ… é«˜é€Ÿãªãƒ‘ãƒ¼ã‚¹ (ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ã¿)
- âœ… uvã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦
- âœ… å†ç¾æ€§ãŒé«˜ã„

**ä»£æ›¿æ¡ˆã¨å´ä¸‹ç†ç”±**:
- `uv pip list` å®Ÿè¡Œ: uvã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã€ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
- `pyproject.toml`: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²ã®ã¿ã§æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸æ˜

### 2. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±: PyPI API
**æ±ºå®š**: PyPI JSON APIã‹ã‚‰ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã¨èª¬æ˜ã‚’å–å¾—

**API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://pypi.org/pypi/{name}/{version}/json`

**å–å¾—ãƒ­ã‚¸ãƒƒã‚¯**:
1. `info.license` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
2. ç©ºã¾ãŸã¯"UNKNOWN"ã®å ´åˆã€`classifiers` ã‹ã‚‰æŠ½å‡º
3. ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ: "License :: OSI Approved :: {ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å}"

**ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥**:
- æœ€å¤§3å›ã¾ã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤
- ãƒªãƒˆãƒ©ã‚¤é–“éš”: 100ms Ã— è©¦è¡Œå›æ•°
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 10ç§’/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- User-Agent: `uv-sbom/0.1.0`

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- å¤±æ•—ã—ã¦ã‚‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é™¤å¤–ã›ãšç¶™ç¶š
- è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- æˆåŠŸ/å¤±æ•—ã®çµ±è¨ˆã‚’è¡¨ç¤º

### 3. å‡ºåŠ›å½¢å¼: CycloneDX 1.6 ã¨ Markdown
**CycloneDX 1.6 JSON**:
- æ¨™æº–çš„ãªSBOMãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- ãƒ„ãƒ¼ãƒ«é€£æºãŒå®¹æ˜“
- è±Šå¯Œãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚µãƒãƒ¼ãƒˆ

**Markdownè¡¨**:
- äººé–“ãŒèª­ã¿ã‚„ã™ã„
- GitHubã§ç›´æ¥è¡¨ç¤ºå¯èƒ½
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ãŒå®¹æ˜“

**ã‚«ãƒ©ãƒ **: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ | èª¬æ˜

### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼
**æ–¹é‡**:
- æ—¥æœ¬èªã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- å…·ä½“çš„ãªè§£æ±ºç­–ã®ææ¡ˆ (ğŸ’¡ãƒãƒ¼ã‚¯ä»˜ã)
- ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã®è¡¨ç¤º
- ãƒ‘ã‚¹æƒ…å ±ã‚’æ˜ç¤º

**ä¾‹**:
```
âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:

uv.lockãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: /path/to/project/uv.lock

ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«uv.lockãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚
   uvãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œã™ã‚‹ã‹ã€
   --pathã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ­£ã—ã„ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
```

## å®Ÿè£…ã®è©³ç´°

### main.rs ã®å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```rust
fn main() {
    if let Err(e) = run() {
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã¨ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã®å‡ºåŠ›
        eprintln!("\nâŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:\n");
        eprintln!("{}", e);

        // ã‚¨ãƒ©ãƒ¼ã®æ ¹æœ¬åŸå› ã¾ã§è¾¿ã‚‹
        let mut source = e.source();
        while let Some(err) = source {
            eprintln!("\nåŸå› : {}", err);
            source = err.source();
        }

        process::exit(1);
    }
}

fn run() -> Result<()> {
    // 1. CLIå¼•æ•°ãƒ‘ãƒ¼ã‚¹
    let args = Args::parse_args();

    // 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¤œè¨¼
    let project_path = PathBuf::from(args.path.unwrap_or("."));
    validate_project_path(&project_path)?;

    // 3. uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
    let lockfile_path = project_path.join("uv.lock");
    if !lockfile_path.exists() {
        return Err(SbomError::LockfileNotFound { ... });
    }

    // 4. uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ãƒ»ãƒ‘ãƒ¼ã‚¹
    eprintln!("ğŸ“– uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...");
    let content = fs::read_to_string(&lockfile_path)?;
    let packages = lockfile::parse_lockfile(&content)?;

    // 5. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—
    eprintln!("ğŸ” ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™...");
    let packages = license::fetch_licenses(packages)?;

    // 6. å‡ºåŠ›ç”Ÿæˆ
    eprintln!("ğŸ“ {}å½¢å¼ã§å‡ºåŠ›ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™...", format_name);
    let output = match args.format {
        Json => cyclonedx::generate_bom(packages)?,
        Markdown => markdown::generate_table(packages),
    };

    // 7. å‡ºåŠ›
    if let Some(path) = args.output {
        fs::write(&path, output)?;
        eprintln!("âœ… å‡ºåŠ›å®Œäº†: {}", path);
    } else {
        io::stdout().write_all(output.as_bytes())?;
    }

    Ok(())
}
```

### license.rs ã®ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯

```rust
fn fetch_from_pypi_with_retry(
    client: &Client,
    name: &str,
    version: &str,
) -> Result<(Option<String>, Option<String>)> {
    const MAX_RETRIES: u32 = 3;
    let mut last_error = None;

    for attempt in 1..=MAX_RETRIES {
        match fetch_from_pypi(client, name, version) {
            Ok(result) => return Ok(result),
            Err(e) => {
                last_error = Some(e);
                if attempt < MAX_RETRIES {
                    // æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã§ã¯ãªãç·šå½¢ãƒãƒƒã‚¯ã‚ªãƒ•
                    std::thread::sleep(Duration::from_millis(100 * attempt as u64));
                }
            }
        }
    }

    Err(last_error.unwrap())
}
```

### ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤º

```rust
// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é€²æ—ã‚’è¡¨ç¤º
eprint!(
    "\r   é€²æ—: {}/{} ({:.1}%) - {}",
    idx + 1,
    total,
    ((idx + 1) as f64 / total as f64) * 100.0,
    package.name
);

// å®Œäº†æ™‚ã®çµ±è¨ˆ
eprintln!("âœ… ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—å®Œäº†: æˆåŠŸ {}/{}, å¤±æ•— {}", successful, total, failed);
```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®å ´æ‰€
å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«`#[cfg(test)]`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é…ç½®:

- `lockfile.rs`: uv.lockã®ãƒ‘ãƒ¼ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ
- `license.rs`: ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ (APIå‘¼ã³å‡ºã—ã¯å«ã¾ãªã„)
- `cyclonedx.rs`: BOMç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆ
- `markdown.rs`: è¡¨ç”Ÿæˆã¨ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ã‚’ãƒ†ã‚¹ãƒˆ

### ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
`examples/sample-project/` ã«å®Ÿéš›ã®uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®:
- 5ã¤ã®å®Ÿãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (requests, certifi, charset-normalizer, idna, urllib3)
- ä¾å­˜é–¢ä¿‚ã‚’å«ã‚€
- æ‰‹å‹•ãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ†ã‚¹ãƒˆã«ä½¿ç”¨

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å…¨ãƒ†ã‚¹ãƒˆ
cargo test

# è©³ç´°å‡ºåŠ›
cargo test -- --nocapture

# ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆ
cargo run -- --path examples/sample-project --format markdown
```

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ãƒ“ãƒ«ãƒ‰
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
cargo build

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
cargo build --release

# å®Ÿè¡Œ
cargo run -- --help
cargo run -- --path examples/sample-project --format json
```

### ã‚³ãƒ¼ãƒ‰å“è³ª
```bash
# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèª
cargo fmt -- --check

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé©ç”¨
cargo fmt

# Linting
cargo clippy -- -D warnings
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§

### å‡¦ç†æ™‚é–“ã®è¦‹ç©ã‚‚ã‚Š
- **uv.lockãƒ‘ãƒ¼ã‚¹**: < 100ms
- **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—**: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ•° Ã— 100-500ms
  - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã«ä¾å­˜
  - ãƒªãƒˆãƒ©ã‚¤æ™‚ã¯æœ€å¤§1.5ç§’/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- **å‡ºåŠ›ç”Ÿæˆ**: < 50ms

### ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
- PyPI APIå‘¼ã³å‡ºã— (é€æ¬¡å‡¦ç†)
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·

### æœ€é©åŒ–ã®ä½™åœ°
1. **ä¸¦åˆ—å‡¦ç†**: tokioã§éåŒæœŸå‡¦ç†åŒ–
2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: PyPI APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«DBä¿å­˜
3. **ãƒãƒƒãƒå‡¦ç†**: è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸€åº¦ã«ã‚¯ã‚¨ãƒª (APIåˆ¶é™ã«æ³¨æ„)

## ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã¨å¯¾å‡¦

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

1. **uv.lockãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   - åŸå› : é–“é•ã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
   - è§£æ±º: `--path`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ­£ã—ã„ãƒ‘ã‚¹ã‚’æŒ‡å®š

2. **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±å–å¾—å¤±æ•—**
   - åŸå› : ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œã€PyPI APIéšœå®³ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸åœ¨
   - å¯¾å‡¦: è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã€å¤±æ•—ã—ã¦ã‚‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å«ã‚ã‚‹

3. **ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿å¤±æ•—**
   - åŸå› : è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸åœ¨ã€æ¨©é™ä¸è¶³
   - è§£æ±º: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆã€æ¨©é™ç¢ºèª

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **å¤–éƒ¨APIä¾å­˜**
   - PyPI APIã¸ã®ä¿¡é ¼ (HTTPSé€šä¿¡)
   - ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã§DoSé˜²æ­¢

2. **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ**
   - ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–
   - ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿æ¨©é™ãƒã‚§ãƒƒã‚¯

3. **ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®éœ²å‡º**
   - ãƒ‘ã‚¹æƒ…å ±ã‚’ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å«ã‚€
   - æ©Ÿå¯†æƒ…å ±ã®æ¼æ´©ãƒªã‚¹ã‚¯ (æœ€å°é™)

## æ‹¡å¼µå¯èƒ½æ€§

### å°†æ¥ã®æ©Ÿèƒ½å€™è£œ

1. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½**
   - SQLiteã§PyPI APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
   - TTLè¨­å®š (ä¾‹: 7æ—¥)

2. **ä¸¦åˆ—å‡¦ç†**
   - `reqwest`ã®éåŒæœŸç‰ˆã‚’ä½¿ç”¨
   - `tokio`ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§ä¸¦åˆ—åŒ–

3. **è¿½åŠ ã®SBOMãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**
   - SPDX 2.3
   - SWID

4. **è„†å¼±æ€§æƒ…å ±**
   - OSV APIé€£æº
   - æ—¢çŸ¥ã®è„†å¼±æ€§ã‚’å ±å‘Š

5. **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿**
   - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®`METADATA`ãƒ•ã‚¡ã‚¤ãƒ«
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œã‚µãƒãƒ¼ãƒˆ

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ**: `cargo build`ãŒå¤±æ•—ã™ã‚‹
**ç¢ºèªäº‹é …**:
1. Rustã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (1.70ä»¥ä¸Šæ¨å¥¨)
2. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š (ä¾å­˜é–¢ä¿‚ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)
3. `Cargo.lock`ã®å‰Šé™¤å¾Œã«å†ãƒ“ãƒ«ãƒ‰

### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼

**å•é¡Œ**: PyPI APIã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
**è§£æ±ºç­–**:
1. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šç¢ºèª
2. ãƒ—ãƒ­ã‚­ã‚·è¨­å®šç¢ºèª
3. ãƒªãƒˆãƒ©ã‚¤ãŒ3å›å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**å•é¡Œ**: uv.lockãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼
**è§£æ±ºç­–**:
1. uv.lockãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ç¢ºèª
2. uvã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª (ç•°ãªã‚‹å½¢å¼ã®å¯èƒ½æ€§)
3. TOMLã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ç¢ºèª

## è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- Rustæ¨™æº–ã‚¹ã‚¿ã‚¤ãƒ« (`cargo fmt`)
- Clippyã®è­¦å‘Šã‚’ã™ã¹ã¦è§£æ¶ˆ
- æ–°æ©Ÿèƒ½ã«ã¯å¿…ãšãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªã§åˆ†ã‹ã‚Šã‚„ã™ã

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
1. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ãƒ»å®Ÿè¡Œ
3. `cargo fmt`ã¨`cargo clippy`ã‚’å®Ÿè¡Œ
4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°
5. PRã‚’ä½œæˆ

## é€£çµ¡å…ˆãƒ»ãƒªã‚½ãƒ¼ã‚¹

- **GitHub**: https://github.com/yourusername/uv-sbom
- **Issues**: ãƒã‚°å ±å‘Šãƒ»æ©Ÿèƒ½è¦æœ›
- **Documentation**: README.md, DEVELOPMENT.md
- **License**: MIT

## è£œè¶³æƒ…å ±

### CycloneDX 1.6 ä»•æ§˜
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://cyclonedx.org/docs/1.6/
- PURLå½¢å¼: `pkg:pypi/{package_name}@{version}`

### PyPI JSON API
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://warehouse.pypa.io/api-reference/json.html
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `https://pypi.org/pypi/{name}/{version}/json`
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™: æ˜ç¤ºçš„ãªåˆ¶é™ãªã— (å¸¸è­˜çš„ãªç¯„å›²ã§ä½¿ç”¨)

### uv
- å…¬å¼ã‚µã‚¤ãƒˆ: https://github.com/astral-sh/uv
- uv.lockå½¢å¼: TOMLå½¢å¼ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«`[[package]]`ã‚»ã‚¯ã‚·ãƒ§ãƒ³
